<section class="section" id="experience">
  <div class="container">
    <h2 class="section-title" appAnimateOnScroll>Experience</h2>

    <div class="timeline">
      @for (exp of experiences; track exp.company; let i = $index) {
        <div class="timeline-item" appAnimateOnScroll>
          <div class="timeline-marker">
            <div class="timeline-dot" [class.active]="i === 0"></div>
            @if (i < experiences.length - 1) {
              <div class="timeline-line"></div>
            }
          </div>
          <div class="timeline-content">
            <div class="timeline-header">
              <div>
                <h3 class="company-name">{{ exp.company }}</h3>
                <p class="role-name">{{ exp.role }}</p>
              </div>
              <span class="period-badge">{{ exp.period }}</span>
            </div>

            <ul class="point-list">
              @for (point of exp.points; track point) {
                <li>{{ point }}</li>
              }
            </ul>

            <div class="tech-tags">
              @for (tag of exp.techTags; track tag) {
                <span class="tech-tag">{{ tag }}</span>
              }
            </div>

            @if (exp.award) {
              <button class="award-badge" (click)="openAward(exp.award)">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>
                {{ exp.award.label }}
              </button>
            }
          </div>
        </div>
      }
    </div>
  </div>

  @if (selectedAward) {
    <div class="award-overlay" (click)="closeAward()">
      <div class="award-modal" (click)="$event.stopPropagation()">
        <div class="award-modal-header">
          <div class="award-modal-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/></svg>
            <div>
              <h3>{{ selectedAward.label }}</h3>
              <p>{{ selectedAward.issuer }}</p>
            </div>
          </div>
          <button class="award-close" (click)="closeAward()">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
          </button>
        </div>
        <div class="award-image-frame">
          <div class="award-image" [style.background-image]="'url(' + selectedAward.image + ')'" (contextmenu)="$event.preventDefault()" (dragstart)="$event.preventDefault()"></div>
        </div>
        <div class="award-modal-footer">
          <span class="award-date">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
            Issued {{ selectedAward.date }}
          </span>
        </div>
      </div>
    </div>
  }
</section>
